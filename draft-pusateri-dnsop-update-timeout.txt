



Internet Engineering Task Force                              T. Pusateri
Internet-Draft                                             T. Wattenberg
Intended status: Standards Track                            Unaffiliated
Expires: February 2, 2019                                 August 1, 2018


                      DNS TIMEOUT Resource Record
                 draft-pusateri-dnsop-update-timeout-00

Abstract

   This specification defines a new DNS TIMEOUT resource record that
   associates a lifetime with one or more zone resource records with the
   same owner name and class.  It is intended to be used to transfer
   resource record lifetime state between a zone's primary and secondary
   servers and to store lifetime state during server software restarts.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on February 2, 2019.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



Pusateri & Wattenberg   Expires February 2, 2019                [Page 1]

Internet-Draft              Abbreviated Title                August 2018


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   2
   2.  Timeout Resource Record Properties  . . . . . . . . . . . . .   2
   3.  Secondary Server Behavior . . . . . . . . . . . . . . . . . .   3
   4.  Sources of TIMEOUT Expiry Time  . . . . . . . . . . . . . . .   3
   5.  Record Definition . . . . . . . . . . . . . . . . . . . . . .   4
   6.  Packet Format . . . . . . . . . . . . . . . . . . . . . . . .   4
   7.  Hash Requirements . . . . . . . . . . . . . . . . . . . . . .   4
   8.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   9.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   10. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   4
   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     11.1.  Normative References . . . . . . . . . . . . . . . . . .   4
     11.2.  Informative References . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   DNS Update [RFC2136] provides a mechanism to dynamically add/remove
   DNS resource records to/from a zone.  When a resource record is
   dynamically added, it remains in the zone until it is removed
   manually or via a subsequent DNS Update.  A zone administrator may
   want to enforce a default lifetime for dynamic updates (such as the
   DHCP lease lifetime) or the DNS Update may contain a lifetime using
   an EDNS(0) Update Lease option [I-D.sekar-dns-ul].  This lease
   lifetime is not communicated to secondary servers and will not endure
   through server software restarts.  This specification defines a new
   DNS TIMEOUT resource record that associates a lifetime with one or
   more resource records with the same owner name and class.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

2.  Timeout Resource Record Properties

   TIMEOUT resource records have different properties than normal DNS
   resource records.

   1.  TIMEOUT resource records are only defined for CLASS IN.

   2.  TIMEOUT resource records are only for administrative use and they
       cannot be directly queried via the normal DNS request/response
       query mechanism.  Valid requests for TIMEOUT resource record



Pusateri & Wattenberg   Expires February 2, 2019                [Page 2]

Internet-Draft              Abbreviated Title                August 2018


       types MUST return responses with an NOERROR RCODE and an ANSWER
       COUNT of zero.

   3.  TIMEOUT resource records are not automatically sent in AXFR, IXFR
       zone transfer requests.  Both primary and secondary servers
       should be configured on a per zone basis to transfer TIMEOUT
       resource records to ensure they are supported.

   4.  TIMEOUT resource records are not considered for
       DNSSEC/NSEC/NSEC3/NSEC5 record construction.

   5.  TIMEOUT resource records cannot be directly added, modified, or
       deleted through DNS Update.

   6.  A TIMEOUT resource record MUST be removed when the last resource
       record it covers has been removed.  This may be due to the record
       expiring (reaching the expiry time) or due to a subsequent DNS
       Update or administrative action.

3.  Secondary Server Behavior

   A secondary or slave server may or may not understand TIMEOUT
   resource records.  The primary or master server should not be
   configured to send TIMEOUT resource records if the secondary or slave
   server does not understand them.  However, if TIMEOUT resource
   records are mistakenly transferred to a server that does not
   understand them, they are treated like any other resource record that
   the server may not understand [RFC3597].

   A secondary server that does understand the TIMEOUT resource records
   it receives in a transfer MUST abide by the properties of the
   resource record type defined in Section 2.

   A secondary server will independently expire the records in a zone it
   maintains covered by the TIMEOUT resource record as well as expire
   the TIMEOUT resource record itself when the last record it covers has
   expired in the same manner that a primary server would.

   If a TIMEOUT resource record is removed from a subsequent zone
   transfer, the secondary server MUST also remove it from its zone
   database regardless of the expiry time.

4.  Sources of TIMEOUT Expiry Time

   The expire time may come from many different sources.  A few are
   listed here however, this list is not considered complete.

   1.  Via DHCP Dynamic Lease Lifetime communicated out of band.



Pusateri & Wattenberg   Expires February 2, 2019                [Page 3]

Internet-Draft              Abbreviated Title                August 2018


   2.  Via EDNS(0) Update Lease option [I-D.sekar-dns-ul] communicated
       in DNS Update.

   3.  Via an administrative default server value such as one day (86400
       seconds).

5.  Record Definition

6.  Packet Format

7.  Hash Requirements

8.  IANA Considerations

   This document defines a new DNS Resource Record Type named TIMEOUT to
   be exchanged between authoritative master and slave DNS servers.  It
   is assigned out of the DNS Parameters Resource Record (RR) Type
   registry.  The value for the TIMEOUT resource record is TBA.

9.  Security Considerations

   Secondary servers that have received TIMEOUT resource records in a
   transfer but do not understand the record type will serve requests
   for them like any other resource record type.  This is a
   configuration error and can reveal the time that other DNS resource
   records will be present.

10.  Acknowledgements

   This idea was motivated through conversations with Mark Andrews.

11.  References

11.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3597]  Gustafsson, A., "Handling of Unknown DNS Resource Record
              (RR) Types", RFC 3597, DOI 10.17487/RFC3597, September
              2003, <https://www.rfc-editor.org/info/rfc3597>.








Pusateri & Wattenberg   Expires February 2, 2019                [Page 4]

Internet-Draft              Abbreviated Title                August 2018


11.2.  Informative References

   [I-D.sekar-dns-ul]
              Sekar, K., "Dynamic DNS Update Leases", draft-sekar-dns-
              ul-01 (work in progress), August 2006.

   [RFC2136]  Vixie, P., Ed., Thomson, S., Rekhter, Y., and J. Bound,
              "Dynamic Updates in the Domain Name System (DNS UPDATE)",
              RFC 2136, DOI 10.17487/RFC2136, April 1997,
              <https://www.rfc-editor.org/info/rfc2136>.

Authors' Addresses

   Tom Pusateri
   Unaffiliated
   Raleigh, NC
   USA

   Email: pusateri@bangj.com


   Tim Wattenberg
   Unaffiliated
   Cologne
   Germany

   Email: mail@timwattenberg.de
























Pusateri & Wattenberg   Expires February 2, 2019                [Page 5]
